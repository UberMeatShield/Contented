<div class="contented-cmp">
  Contented Component showing {{idx}} of {{allD?.length}} directories.

  <div *ngIf="fullScreen">
    <contented-view [viewUrl]="getCurrentLocation()"></contented-view>
  </div>

  <div class="contented-dir" name="contents" *ngFor="let dir of getVisibleDirectories()">
    <div class="directory-contents" [class.current-content-dir]="dir == getCurrentDir()">
      <div class="directory-meta" *ngIf="!!dir">
        <mat-progress-bar
          [value]="dir.count ? ((rowIdx + 1) * 100 / dir.count) : 1"
          [color]="'primary'"
          [bufferValue]="dir?.total"
          [mode]="dir.count == dir.total ? 'determinate' : 'buffer'"
        ></mat-progress-bar>

        <form class="directory-meta-text">
          <span class="dir-name">{{dir?.id}}</span>
          selected: <input name="rowIdx" type="number" [(ngModel)]="rowIdx">
          loaded: <span class="dir-max-count"> {{dir?.contents?.length}}</span> 
          total: {{dir?.total}}
          name: <span class="current-item"> {{currentViewItem}}</span>
          <span *ngIf="dir?.contents?.length < dir.total">
            press (F) or: 
            <button class="btn btn-primary" (click)="fullLoadDir(dir)">
              Load ({{ dir.total - dir.count }}) Items
            </button>
          </span>
        </form>
      </div>

      <directory-cmp 
        [directory]="dir" 
        [currentViewItem]="getCurrentLocation()"
        (clickedItem)="dirItemClicked($event)"
        [previewWidth]="previewWidth" 
        [previewHeight]="previewHeight"
      ></directory-cmp>
      <!--
      -->
    </div>
  </div>
</div>
